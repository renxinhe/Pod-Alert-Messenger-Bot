{% extends "base.html" %}

{% block title %}
Alerts
{% endblock %}

{% block body %}

<!-- Page Content -->
<div class="container">
    <div class="row">
        <div class="col-lg-12 text-center">
            <h1 class="mt-5"><i class="fa fa-bell" aria-hidden="true"></i> Pod Alert <i class="fa fa-exclamation-triangle" aria-hidden="true"></i></h1>
            <p class="lead">Realtime email notification alert for Type A 3D printer jobs in Jacobs Hall, UC Berkeley.</p>
        </div>
    </div>

    <div class="row">
        <div class="col">
            <br>
            <p>The alert table will refresh automatically every 10 seconds. Finished alerts will be automatically removed after 5 minutes.</p>
            <br>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-12 text-center">
            <form action="/new_alert" method="post" id="needs-validation" novalidate>
                <div class="form-row align-items-center">
                    <div class="col-3">
                        <input type="text" class="form-control" name="serial" id="serial" placeholder="Printer Number" required>
                        <div class="invalid-feedback">
                            5-digit printer number required.
                        </div>
                    </div>
                    <div class="col-3">
                        <input type="text" class="form-control" name="name" id="name" placeholder="Name">
                    </div>
                    <div class="col-4">
                        <input type="text" class="form-control" name="email" id="email" placeholder="Email" required>
                        <div class="invalid-feedback">
                            Please provide a valid email.
                        </div>
                    </div>
                    <div class="col-2">
                        <button type="submit" class="btn btn-primary">Submit New Alert</button>
                    </div>
                </div>
            </form>
            <script>
                // Example starter JavaScript for disabling form submissions if there are invalid fields
                (function() {
                    "use strict";
                    window.addEventListener("load", function() {
                        var form = document.getElementById("needs-validation");
                        form.addEventListener("submit", function(event) {
                            if (form.checkValidity() == false) {
                                event.preventDefault();
                                event.stopPropagation();
                            }
                            form.classList.add("was-validated");
                        }, false);
                    }, false);
                }());
            </script>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-12 text-center">
            <table class="table">
                <thead class="thead-default">
                    <tr>
                        <th>Printer Number</th>
                        <th>Print Name</th>
                        <th>Print Progress</th>
                        <th>Print State</th>
                        <th>Name</th>
                        <th>Email</th>
                        <th>Alert Status</th>
                    </tr>
                </thead>
                <tbody id="alerts_body">
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}
